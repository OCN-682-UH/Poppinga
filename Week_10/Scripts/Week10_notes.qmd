---
title: "Week_10 Lectures"
author: "Haley Poppinga"
format: 
  html: 
    toc: true
    theme: sandstone
---

## Week 10a Lecture: Functional Programming  

[Lecture Slides](https://raw.githack.com/OCN-682-UH/Poppinga/main/Week_10/Lectures/17_Functional-Programming.html#1)  
[Required Reading R4DS Ch. 25](https://r4ds.hadley.nz/functions.html)  
[Required Reading R4DS Ch. 8](https://r4ds.hadley.nz/workflow-help.html)  


### Introduction  

**Outline of class**  

Functional programming  

* Quiz!  
* When to write a function  
* How to make a custom function  

Homework: Practice writing functions.  


**Why functions?**  

* Anytime you have a task that you want to use more than once   
* Keeps your script clean  
* Avoids mistakes with copy and paste  
* Minimizes places where you need to update your code (copy and pasting code over and over makes it hard to change small things)    
* only have to change things once in a function

Anytime you have to do a task more then once...  
Let's use an example where we want to rescale data in multiple columns (value - min/(max - min))  


First set-up your script and create a dataframe of random numbers  


### Load Libraries  

```{r}
library(tidyverse)
library(here)
library(lubridate)
library(dplyr)
library(tidyr)
library(ggplot2)
library(palmerpenguins)
library(PNWColors) # for the PNW color palette 
library(reprex) #reproducible example
library(datapasta) #copy and paste
library(styler) # copy and paste in style)
```


### Practice
```{r}
df <- tibble(
  a = rnorm(10), # draws 10 random values from a normal distribution
  b = rnorm(10),
  c = rnorm(10),
  d = rnorm(10)
)
head(df)
```
rnorm = randomly distributed numbers  
Basien modeling: use setseed() allows it to be consistent. Run before random number generator.  

Anytime you have to do a task more then once...  
Let's use an example where we want to rescale data in multiple columns (value - min/(max - min))  

*Rescale every column individually*  
```{r}
df<-df %>%
  mutate(a = (a-min(a, na.rm = TRUE))/(max(a, na.rm = TRUE)-min(a, na.rm = TRUE)))
```
Replaces a withing the function to do whatever you tell it to.  



Now copy and paste the same code for each column without making any mistakes. 
```{r}
df<-df %>%
  mutate(a = (a-min(a, na.rm = TRUE))/(max(a, na.rm = TRUE)-min(a, na.rm = TRUE)),
         b = (b-min(b, na.rm = TRUE))/(max(a, na.rm = TRUE)-min(b, na.rm = TRUE)),
         c = (c-min(c, na.rm = TRUE))/(max(c, na.rm = TRUE)-min(c, na.rm = TRUE)),
         d = (d-min(d, na.rm = TRUE))/(max(d, na.rm = TRUE)-min(d, na.rm = TRUE)))
```
Did I make a mistake?  
Yes-> after max()  

Correct:  
```{r}
df<-df %>%
  mutate(a = (a-min(a, na.rm = TRUE))/(max(a, na.rm = TRUE)-min(a, na.rm = TRUE)),
         b = (b-min(b, na.rm = TRUE))/(max(b, na.rm = TRUE)-min(b, na.rm = TRUE)),
         c = (c-min(c, na.rm = TRUE))/(max(c, na.rm = TRUE)-min(c, na.rm = TRUE)),
         d = (d-min(d, na.rm = TRUE))/(max(d, na.rm = TRUE)-min(d, na.rm = TRUE)))
```


We can write a function for this  
```{r}
rescale01 <- function(x) {
  value<-(x-min(x, na.rm = TRUE))/(max(x, na.rm = TRUE)-min(x, na.rm = TRUE))
  return(value)
}
df %>%
  mutate(a = rescale01(a),
         b = rescale01(b),
         c = rescale01(c),
         d = rescale01(d))
```



#### Let's break it down  
There are three key steps to creating a new function:  

1. You need to pick a name for the function. Here I‚Äôve used rescale01 because this function rescales a vector to lie between 0 and 1.  

2. You list the inputs, or arguments, to the function inside function. Here we have just one argument. If we had more the call would look like function(x, y, z).  

3. You place the code you have developed in body of the function, a { block that immediately follows function(...). 
  * function() then {}  

4. return tells us what values we want returned when you run the function 



```{r}
rescale01 <- function(x) {
  value<-(x-min(x, na.rm = TRUE))/(max(x, na.rm = TRUE)-min(x, na.rm = TRUE)) # value can be whatever name you want, 
  return(value) 
}
```
One argument here.  
rescale01 is now the function that you've created (e.g. read_csv)
A package is multiple functions put together to use in a library.  

Note: It is way easier to create a function when you already wrote the code rather than creating the function from scratch.


```{r}
# mutate_all(rescale01)
```





Let's make a function to covert degrees fahrenheit to celcius.
What is the calculation for F to C?

Start out by writing the code you want to use:  
temp_C<- (temp_F - 32)*5 / 9


Then figure out what are the different arguments and the inputs and outputs. 
In this case, input is farenheit and output is celsius.  

#### Let's make it a function!  

**Step 1: Name the function**  
```{r}
fahrenheit_to_celsius <- function() {
}
```


**Step 2: Put in the equation**  
```{r}
fahrenheit_to_celsius <- function() { 
  temp_C <- (temp_F - 32) * 5 / 9
}
```

**Step 3: Decide what the arguments are**  
```{r}
fahrenheit_to_celsius <- function(temp_F) {
  temp_C <- (temp_F - 32) * 5 / 9 
}
```
Note: want to make function names applicable to everyone.  

**Step 4: Decide what is being returned**  
```{r}
fahrenheit_to_celsius <- function(temp_F) { 
  temp_C <- (temp_F - 32) * 5 / 9 
  return(temp_C)
}
```
Note: put your functions at top of your script so it is available throughout the whole script.

**Step 5: Test it**  
```{r}
fahrenheit_to_celsius(32)
```

```{r}
fahrenheit_to_celsius(212)
```
Note: test with numbers that you know easily off the top of your head.  
  



##### Think, Pair, Share
Write a function that converts celcius to kelvin. (Remember Kelvin is celcius + 273.15).  

Code I want to use:  
temp_K<- (temp_C + 273.15)

```{r}

celsius_to_kelvin<-function(temp_C) # decide what the arguments are (step 3)
  {  # name the function (step 1)
  temp_K<- (temp_C + 273.15) # put in the equation (step 2)
  return(temp_K) # decide what is being returned (step 4)
}

celsius_to_kelvin(100)
```
Example use: calculate NCP or NCC


#### Making plots into a function  
Let's say you have a specifically formatted plot that you like and that you plan to use over and over again. By turning it into a function, you only have to code it once.  

Let's use our favorite penguin dataset and make a nice plot line plot.  


pal<-pnw_palette("Lake",3, type = "discrete") # my color palette 
ggplot(penguins, aes(x = body_mass_g, y = bill_length_mm, color = island))+
  geom_point()+
  geom_smooth(method = "lm")+ # add a linear model
  scale_color_manual("Island", values=pal)+   # use pretty colors and another example of how to manually change the legend title for colors
  theme_bw()

Note: can make a function like this to use the same theme throughout multiple plots.  

**Making plots into a function**  

Name and set-up the function.  

myplot<-function(){ # copy and pasted code above into the body of the function here: 
pal<-pnw_palette("Lake",3, type = "discrete") # my color palette 
ggplot(penguins, aes(x = body_mass_g, y = bill_length_mm, color = island))+
  geom_point()+
  geom_smooth(method = "lm")+ # add a linear model
  scale_color_manual("Island", values=pal)+   # use pretty colors and change the legend title
  theme_bw()
  }



What do you think our arguments should be?  

* this funciton can change data, x, and y depending on what data you decide to use  


Make the names broad so it can be applicable to several values

myplot<-function(data, x, y){
pal<-pnw_palette("Lake",3, type = "discrete") # my color palette 
ggplot(data = data, aes(x = x, y =y , color = island))+
  geom_point()+
  geom_smooth(method = "lm")+ # add a linear model
  scale_color_manual("Island", values=pal)+   # use pretty colors and change the legend title
  theme_bw()
}



Test it:  

Well, shoot, I got an error.... why do we think that is?  
Why an error? 
The function does not know that those are within the data set. So we need to be explicit about what columns are.  

myplot(data = penguins, x = body_mass_g, y = bill_length_mm)


Even though body_mass_g exists within the penguin dataframe, there is still no individual parameter called body_mass_g in our environment and R is confused.  

**There is a solution though from within the {rlang} package (a part of the tidyverse)!**  

* {rlang} uses what is literally called a "curly-curly" {{}} to help us assign variables that are column names in dataframes.  
* Make it easier to manipulate them within functions  


Let's add curly-curlies to the column names  
```{r}
myplot<-function(data, x, y){ 
pal<-pnw_palette("Lake",3, type = "discrete") # my color palette 
ggplot(data, aes(x = {{x}}, y = {{y}} , color = island))+
  geom_point()+
  geom_smooth(method = "lm")+ # add a linear model
  scale_color_manual("Island", values=pal)+   # use pretty colors and change the legend title
  theme_bw()
}
```
Use in a function any time you want to use a column within a tibble.  
{{}} is saying that you can put anything in x and anything in y  

Test again
```{r}
myplot(data = penguins, x = body_mass_g, y = bill_length_mm)
```

Test with new variables.  
Whatever continuous x or y and flip it out to whatever. 
Will always be the same colors to islands and same geom_smooth, etc.  
```{r}
myplot(data = penguins, x = body_mass_g, y = flipper_length_mm)
```




#### Adding defualts  

Let's say you want to create a default for the function to always default to the penguins dataset. You can set those directly in the function.  

```{r}
myplot<-function(data = penguins, x, y){ # going to always assume that data is penguins
pal<-pnw_palette("Lake",3, type = "discrete") # my color palette 
ggplot(data, aes(x = {{x}}, y = {{y}} , color = island))+
  geom_point()+
  geom_smooth(method = "lm")+ # add a linear model
  scale_color_manual("Island", values=pal)+   # use pretty colors and change the legend title
  theme_bw()
}
```


Defaults  
Now, you can just write...  
Dont need to write data because it is assuming the data is penguins.  
```{r}
myplot(x = body_mass_g, y = flipper_length_mm)
```


#### Layering the plot  
You can also layer onto your plot using '+' just like it is a regular ggplot to change things like labels.  
```{r}
myplot(x = body_mass_g, y = flipper_length_mm)+
  labs(x = "Body mass (g)",
       y = "Flipper length (mm)")
```

Note: can now manipulate plot in any way we already learned with the + signs  




**Add an if-else statement for more flexibility.**  
An aside on if-else statements....  

If this argument is true, then add something.  

Imagine you want a variable to be equal to a certain value if a condition is met. This is a typical problem that requires the if ... else ... construct. For instance:  
```{r}
a <- 4
b <- 5
```

Suppose that if a > b then f should be = to 20, else f should be equal to 10. Using if/else we:  
```{r}
if (a > b) { # my question
  f <- 20 # if it is true give me answer 1
    } else { # else give me answer 2
  f <- 10
}
```
If a > b make f assigned to 20, if it is anything else make f assigned to 10  

When I type f I get...  
```{r}
f
```
Because a is less than b in this case.  


**Back to plotting**  
Using if...else... we can make our function even more flexible.  
Let's say we want the option of adding the geom_smooth lines or not.  
We can create a variable that if set to TRUE add the geom_smooth, otherwise print without.  

First add a new argument for lines and make the default TRUE for ease.  
```{r}
myplot<-function(data = penguins, x, y, lines=TRUE ){ # add new argument for lines
pal<-pnw_palette("Lake",3, type = "discrete") # my color palette 
ggplot(data, aes(x = {{x}}, y = {{y}} , color = island))+
  geom_point()+
  geom_smooth(method = "lm")+ # add a linear model
  scale_color_manual("Island", values=pal)+   # use pretty colors and change the legend title
  theme_bw()
}
```

If-else
Next, add an if-else statement
```{r}
myplot<-function(data = penguins, x, y, lines=TRUE ){ # add new argument for lines
pal<-pnw_palette("Lake",3, type = "discrete") # my color palette 
if(lines==TRUE){
ggplot(data, aes(x = {{x}}, y = {{y}} , color = island))+
  geom_point()+
  geom_smooth(method = "lm")+ # add a linear model
  scale_color_manual("Island", values=pal)+   # use pretty colors and change the legend title
  theme_bw()
} # curly for if statement
else{
ggplot(data, aes(x = {{x}}, y = {{y}} , color = island))+
  geom_point()+ # no geom_smooth here
  scale_color_manual("Island", values=pal)+   # use pretty colors and change the legend title
  theme_bw()
} # curly for else statement
} # curly for entire function
```



Test it
With lines
```{r}
myplot(x = body_mass_g, y = flipper_length_mm)
```

Without lines
```{r}
myplot(x = body_mass_g, y = flipper_length_mm, lines = FALSE)
```




Today's totally awesome R package  
{emokid}: Make your code more emo... you've used the praise package, but if you need to express your frustrations now you can let the world know you are sad

devtools::install_github("itsrainingdata/emokid")
For when you are really sad

library(emokid)
iamsad()
more nights of hugging my pillow, oh replaying memories. üòø
For when you are less sad

iamlesssad()
i can't dream anymore since you left. i miss you singing me to sleep. üòî




Homework
Use any dataset you would like and make two useful functions. One that is a plot and one that is not. Turn in your functions using Quarto with at least 2 examples per function showing its flexibility. Due, as always, at 1pm on Tuesday.

_________________________________________________________________________________


## Week 10b Lecture: Getting Help in R    

[Lecture Slides](https://raw.githack.com/OCN-682-UH/Fall_2025/main/Week_10/21_GettingHelp.html)  
[Required Reading R4DS Ch. 8](https://r4ds.hadley.nz/workflow-help.html)  


### Introduction  

**Outline of class**  

#### Getting Help with R  

* Troubleshooting  
* Common Mistakes  
* Reproducible examples {reprex}  
* Copying and pasting {datapasta}  
* Make a Reprex  



#### Efficiently finding solutions & useful tools  
**(e.g. R packages & functions) is an important skill for a data scientist.**  

Troubleshooting is part of every data scientist‚Äôs life - there is no programmer in the world who does not have to deal with bugs & errors  


See [‚ÄúGetting Started and Getting Help‚Äù](https://rc2e.com/gettingstarted) chapter in the R Cookbook  

Fun fact: ‚Äú...the very first instance of a computer bug was recorded at 3:45 pm (15:45) on the 9th of September 1947. This "bug" was an actual real-life, well ex-moth, that was extracted from the number 70 relay, Panel F, of the Harvard Mark II Aiken Relay Calculator.‚Äù A literal bug! (Christopher McFadden, Interesting Engineering)  



#### If you‚Äôre asking: What package or function should I use to do this thing?  

Google it: (I ALWAYS have google open when I am coding)  

Search with the keywords and package/function name if known, and include .R in the search keywords (e.g. ‚Äúdplyr::mutate add column in .R‚Äù instead of ‚Äúmutate variable‚Äù)  

‚ÄúR‚Äù is generic - so consider using ‚ÄúR software‚Äù or ‚Äú.R‚Äù Start learning and using language common in R communities & publications (e.g. R4DS), like data frame or tibble instead of spreadsheet  

For now, anything reading, wrangling, ggplot2 related:  
considering navigating to documentation from [tidyverse.org](https://tidyverse.org/), [rdocumentation](https://www.rdocumentation.org/), or [RStudio/Posit](https://forum.posit.co/) community.  


Don‚Äôt know what package/function to use for your purpose?  
Use [CRAN Task Views](https://cran.r-project.org/web/views/) to help you find it (grouped by topic) to search for packages by keyword  

Use R-specific search tools:  
[rdocumentation.org](https://www.rdocumentation.org/)  
[rseek.org](https://rseek.org/)(like Google jusy for R)  

For more getting help & searching recommendations, see [Ch. 1 of the R Cookbook 2nd Edition](https://rc2e.com/gettingstarted) by JD Long and Paul Teers  




#### How to know there is an error and where to look for it?  
When you save a script, lines of code with some errors (e.g. unmatched parentheses) will have a red circle with an x in it next to the line number.  


You might also see a red squiggly line under part of your code, indicating a syntax issue. You can hover over the squiggly to see a pop-up hint about what‚Äôs going on.  

Also try rainbow parentheses!  

* gives different color for different parantheses ()

Error messages will show up* in the Console when you try to run the broken code  



**There are multiple types of messages that R will print. Read the message to figure out what it‚Äôs trying to tell you.**  

*Error*: There‚Äôs a fatal error in your code that prevented it from being run through successfully. You need to fix it for the code to run.  

*Warning*: Non-fatal errors (doesn‚Äôt stop the code from running, but this is a potential problem that you should know about). Will still run code but it may be wrong.     

*Message*: Here‚Äôs some helpful information about the code you just ran (you can hide these if you want to).  


#### When you get an error message in R:
Read the error message. *Did you read the error message? Read the error message.* Sometimes it will be infuriatingly vague, but often it will tell you exactly how to fix it.  

(e.g. ‚Äúdo you need ==?‚Äù).  
For example: did you use a logical with just one equal sign instead of 2?  

Quiz:  
I come upon an error. What is the very first thing I should do.  
Read errior message

I have the following code. Data %>% summarise(Temp_mean = mean(Tempearture)). When I run it I get the following error: ‚ÄòError in summarise : object ‚ÄòTemperature‚Äô not found. What is one possible reason that I got this error?‚Äô

I spelled the Temperature column wrong relative to my "Data" dataframe



Which of the items below do you need to make a function. Check all correct answers below:

* You need to pick a name for the function
* You place the code you have developed in body of the function
* add return(value) at the end if you want values returned

If I want to write a function to convert Kelvin to Celsius, what is an example of a good function name.  
K_to_C()  


#### Some common errors/issues to keep an eye out for at the beginning (and forever and ever...)  
**If R...can‚Äôt find a function that you know exists:**  

Symptom:  
‚ÄòError in _________: could not find function ‚Äú_________‚Äù'  


Likely diagnoses:  

* The library containing the function you‚Äôre trying to use hasn‚Äôt been attached.  
* You‚Äôve misspelled or mistyped the function name.  

Possible solutions:  

* Make sure you‚Äôve attached the required package with *library(package_name)* - and remember this line should exist in your script before the code that uses a function from that package  
* Make sure you‚Äôve run the line of code that attaches the necessary package.  
* Check the function spelling/formatting very carefully  



**If R...can‚Äôt find the pipe operator:**  

Symptom:  
‚ÄòError in ____ %>% ____ : could not find function "%>%"‚Äô  

Likely diagnoses:  

* Haven‚Äôt attached the tidyverse (w/ library(tidyverse)) before using the pipe.  
* Haven‚Äôt run the line of code to attach the tidyverse.  

Possible solutions:  

* Make sure you‚Äôve attached the tidyverse with *library(tidyverse)* - and remember this line should exist in your script before the code that uses %>%  
* Make sure you‚Äôve run the line of code that attaches the tidyverse.  


**If R...can‚Äôt find an object (e.g. an object or variable) that you know you‚Äôve stored:**  

Symptom:  
‚ÄòError in ____ : object ‚Äò_____‚Äô not found‚Äô  

Likely Diagnosis:  

* The object hasn‚Äôt been created or stored  
* You‚Äôve mistyped the object name  

Possible Solution:  

* Make sure you‚Äôve run the line(s) of code where you read-in or create the object (e.g read_csv)  
* Make sure you‚Äôve spelled/typed the object name exactly as it exists in the Environment  
* Use ls() to check which objects exist in your current workspace (and if it‚Äôs not there, then it hasn‚Äôt been created/stored yet)  



**If R‚Ä¶tells you it‚Äôs ignoring an argument within a function.**  

Symptom:  
‚ÄòWarning: Ignoring unknown parameters: ____‚Äô  

Possible diagnoses:  

* You‚Äôve included an argument that doesn‚Äôt exist for that function  
* You‚Äôve mistyped an argument that does exist for that function  


Possible solutions:  

* Check to ensure that the argument you‚Äôre trying to use for that function (a) exists, and (b) is entered exactly how R expects it to be in your code - especially checking for spelling, abbreviation & capitalization  

How to find out what arguments are accepted by which functions:  

* Viewing the R documentation with *?function_name*, and look in the ‚ÄòArguments‚Äô section (or ‚ÄòAesthetics‚Äô section for geoms in ggplot2)  



**If you‚Ä¶are trying to make a basic ggplot2 graph and you accidentally use %>% between layers instead of a +**  

Symptoms:  
‚ÄòError: mapping must be created by aes()  
Did you use %>% instead of +?‚Äô  

Diagnosis:  

* Used the pipe operator %>% instead of + to add ggplot2 layers?  

Possible solutions:  

* Switch to + for ggplot2!  



**If you‚Ä¶think your ggplot code looks perfect and you‚Äôre not getting an error message, but only an empty graph is showing up:**  

Symptoms:  
Empty ggplot  

Possible diagnoses:  

* Did you check what the data you‚Äôre trying to plot looks like? For example, did you accidentally filter out all observations in a previous step?  
* Did you forget a plus sign to add the geom_* layer?  

Possible solutions:

* Make sure there is a plus sign (+) between all ggplot layers.  
* Look at the data you‚Äôre trying to plot to ensure it exists  


**If you‚Ä¶are trying to change some aesthetic in a ggplot graph, but you‚Äôre getting an error:**  

Symptom:  
Error in rep(value[[k]], length.out = n) :  
              attempt to replicate an object of type 'closure'  

Possible diagnoses:

* Did you forget that when you‚Äôre referencing a variable in ggplot, it needs to be within an aes() function?  
* Put something outside of aes() instead of inside  

Possible solutions:  

* Make sure that when you‚Äôre updating a graph aesthetic based on a variable in the data frame, you have that argument within aes().  


**If you...are trying to find a summary value for a variable that you know contains numbers, but you‚Äôre getting an NA result and/or a warning message:**  

Symptom(s):  

* NA returned when summary statistic value (e.g. mean) expected  
* ‚ÄòIn __ : argument is not numeric or logical: returning NA‚Äô  

Possible diagnoses:  

* The default argument of the function is *na.rm = ‚ÄúFALSE‚Äù*.  
* The class of non-NA values is not numeric (e.g.., there are words in the column or R otherwise doesn‚Äôt know the class should be ‚Äúnumeric‚Äù).
  * e.g may have to change your mean to be na.rm = "TRUE" so that you don't get an NA when looking for mean, min, or max if that exists within dataframe  
  * e.g trying to get mean of column that has characters (non-numeric), soi naje sure column is numeric  

Possible solutions:  

* If the variable is numeric (check class), update argument to na.rm = ‚ÄúTRUE‚Äù  
* Coerce variable class to ‚Äúnumeric‚Äù if appropriate/possible.    



#### Can‚Äôt figure out what‚Äôs going on from the error message directly?  

1. **Look over code very carefully** - character-by-character and space-by-space. Run line-by-line to see where it breaks. Some things to pay close attention to at this point:  

  * Are all parentheses matching pairs?  
  * Have you typed in all functions, objects, and conditions in exactly correctly?  
  * If you run something and it doesn‚Äôt show up, did you call it to have it show up, or have you just asked R to store it?  
  * Have you looked at all intermediate data frames during wrangling to make sure data are being subset & transformed as expected?  

2. **Google the copied & pasted error message**. Someone else has encountered and solved it before. Find them [often on Stack Overflow](https://stackoverflow.com/questions). Beware rabbit holes and grumps.  

3. Take a **break** and come back to it.  

4. Make a small, **reproducible example (reprex up next!)** and see if you can recreate the error. I realize and resolve many errors by trying to make something work in a simpler, self-contained example.  



**Don‚Äôt forget the flip-side!**  
Just because you don‚Äôt get an error message doesn‚Äôt mean that you did things correctly - it just means that the code is running.  

So **LOOK AT YOUR RAW DATA, INTERMEDIATE DATA AND RESULTS** - especially just after reading it in and after wrangling steps - to ensure that what you think your code is supposed to be doing with/to your data is actually what your code is doing with/to your data.  



#### Supportive R communities  

[The RStudio community](https://forum.posit.co/)  
"#rstats" on BlueSky - no seriously, create an account. Some to follow right away for maximum R learning, commentary and community:   
@dataandme.bsky.social, @cedricsherer.com, @juliasilge.com, @posit.co, @kawawoo.com. @themockup.blog, @jennybryan.bsky.social,@noamross.net, @johnthegeek.com, @dslc.io, @womenindataviz.bsky.social, @juliesquid.bsky.social, @hadleywickham.bsky.social, @paul-buerkner.bsky.social, @r-foundation.bsky.social, @quarto.org, @bigbookofr.bsky.social  


**ChatGPT**  
Chat GPT is a "large language model" that follows an instruction in a prompt and provides a detailed response.  

A.I. can be a very helpful tool, but it is only as smart as you... if you do not know how to debug code and you trust it blindly you will find yourself in a lot of trouble. Use it to assist you, but do not use it to replace you.  

Why should you be careful with ChatGPT?  

"If you‚Äôre solely relying on ChatGPT to learn how to code, you could be missing out on some crucial programming principles ‚Äî like knowing how to solve problems, understanding how to read tech documentation, getting comfortable with trial and error, and building things on your own. ‚ÄúWith coding, you need to know the fundamentals,‚Äù Julie says. ‚ÄúIf you don‚Äôt know the fundamentals, then I don‚Äôt think the tool will be that helpful to you.‚Äù Code Academy  


There are some good blog posts on tips for using ChatGPT to help with coding problems. Here is one from [R bloggers](https://www.r-bloggers.com/2023/04/tips-for-using-chatgpt-to-learn-r/)  

Here is an example of a prompt and a response:  

Prompt: explain this R code: m1 <- gam(y ~ s(year, by = sites), data = my_data, family = ‚Äúpoisson‚Äù)  

GPT: The code m1 <- gam(y ~ s(year, by = sites), data = my_data) specifies a generalized additive model (GAM) in R.  

Here‚Äôs what each part of the code means:  

m1 <- : assigns the output of the model to the object named m1. gam() : specifies that we want to fit a generalized additive model. *y ~ s(year, by = sites) : specifies the model formula, where y is the response variable and year is the predictor variable of interest. The function s() specifies that year is a smooth function, which allows for a flexible fit to the data. The by = sites argument specifies that we want to fit separate smooth functions for each sites level, which is a way to model site-specific effects.  
*note: anytime I have asked chat GPT to code me something slightly more complicated it has given me errors or made up functions that don't exist. Again, use it as a tool, not a replacement for learning.  

Other helpful resources and a package!  

* [ChatGPT](https://thenewstack.io/chatgpt-smart-but-not-smart-enough/): Smart, but not smart enough - Can generative AI teach you to code? It's complicated  
* [ChatGPT R Package](https://github.com/jcrodriguez1989/chatgpt)  
* [ChatGPT Cheat Sheet for Data Science](https://www.datacamp.com/cheat-sheet/chatgpt-cheat-sheet-data-science)  

I asked ChatGPT!  
I asked ChatGPT to tell me how to best use LLMs to ask for help in R and here is what it told me. I put it into a Quarto doc for you. Note: As a UH student you have Gemini Pro for free. Basic ChatGPT, but Pro is not.  

[Quarto Help Document](https://raw.githack.com/OCN-682-UH/Fall_2025/main/Week_10/RHelp.html).  


#### Make a reproducible example to ask for help  

install.packages('reprex') #reproducible example  
install.packages('datapasta') #copy and paste  
install.packages('styler') # copy and paste in style  


When asking the R community for help, it is really important to give them enough information to help you. Remember, they don't have your computer or your data and they are not in your head. Help them help you.  

By running code with {reprex}, you can create a reproducible example to post to Stack Overflow, Slack, GitHub, or an email to your collaborator.  
They will have ewverything packaged together that they need to run your code.  


#### Making your first reprex  
Let's say you are trying to make a plot with the mpg dataset and you hit an error.   

library(tidyverse)  
 
mpg %>%  
  ggplot(aes(x = displ, y = hwy))%>%  
  geom_point(aes(color = class))  

Error in geom_point():  
mapping must be created by aes().  
Did you use %>% or |> instead of +?  

Steps:  

* put code into script  
* highlight code that you are trying to reproduce  
* Go to tabs and click Tools  
* Go to Addins -> Render Reprex -> Execute  
* Decide what venue you want
* Paste to the program you want.  
* Make sure to "append session info". So that people know what packages you have and version of R, etc.   
* In bottom right "Viewer" in R, it will show you what it would look like on StackOverflow formatted and all session info of everything thats loaded for you in your session.  
* go to Stackoverflow, create account, ask a question, and paste into body.  



**Using real data**  
Often you are working with real data and run into an issue. You need the example to be reproducible and simple. Other people on the internet do not have your data so what should we do?  


Open the stars.csv file and copy and paste the first few lines into R.   
```{r}
#| eval: false
# lat    long    star_no
# 33.548    -117.805    10
# 35.534    -121.083    1
# 39.503    -123.743    25
# 32.863    -117.24    22
# 33.46    -117.671    8
# 33.548    -117.805    3
```
This is not helpful and won't run...  

{datapasta} helps you copy and past snippets of your data in a reproducible way.  


#### datapasta Package  
This time copy the code and got to Addins -> paste as tribble and then name it something. 

Go to Tools -> Addins -> datapasta Tribble
```{r}
data<-tibble::tribble(
    ~lat,    ~long, ~star_no,
  33.548, -117.805,      10L,
  35.534, -121.083,       1L,
  39.503, -123.743,      25L,
  32.863,  -117.24,      22L,
   33.46, -117.671,       8L,
  33.548, -117.805,       3L
  )
data
```
You can now use this with {reprex} to make a reproducible example that can fully run with your own data and code.  


#### Do's and don't of reprex  

1.Use the smallest, simplest, most built-in data possible.  

* e.g. using datapasta  
* give them only 10 lines of data instead of all of it

2. Include commands on a strict ‚Äúneed to run‚Äù basis.  

* Ruthlessly strip out anything unrelated to the specific matter at hand.  
* Include every single command that is required, e.g. loading specific packages  
* only load packages and code specifically required to error you have.  

3. Pack it in, pack it out, and don‚Äôt take liberties with other people‚Äôs computers. You are asking people to run this code!  

* Don‚Äôt start with rm(list = ls()). It is anti-social to clobber other people‚Äôs workspaces. This will delte their workspace.    
* Don‚Äôt start with setwd("C:\Users\jenny\path\that\only\I\have"), because it won‚Äôt work on anyone else‚Äôs computer.  
* Don‚Äôt mask built-in functions, i.e. don‚Äôt define a new function named c or mean.  
* If you change options, store original values at the start, do your thing, then restore them.  
* If you create files, delete them at end of reprex when you‚Äôre done.    

4. Use good coding style.  


**The reprex code:**   

* Must run and, therefore, should be run by the person posting. No faking it. Actually run the code.   
* Should be easy for others to digest, so they don‚Äôt necessarily have to run it. You are encouraged to include selected bits of output.  
* Should be easy for others to copy + paste + run, if and only if they so choose. Don‚Äôt let inclusion of output break execute-ability. Put outputs in hastags for example.  
https://reprex.tidyverse.org/articles/reprex-dos-and-donts.html.  


**Practice on your own.**    
Make some simple code and add a bug. Use datapasta and reprex to make a reproducible example and post it to our slack channel. Make sure to add your session info.  

Ask someone to fix it and find a solution.  
See if you can debug someone else's errors.  



















