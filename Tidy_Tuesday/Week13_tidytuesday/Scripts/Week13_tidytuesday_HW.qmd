---
title: "Week 13 Tidy Tuesday"
author: "Haley Poppinga"
format:  
  html: 
    toc: true
    theme: sandstone
---

### Introduction  
**Tidy Tuesday's Homework**   

[Data Link](https://github.com/rfordatascience/tidytuesday)   

Tidy Tuesday is an international community of R enthusiasts that create visuals from the same dataset. The goal is to practice plotting and learn something new every week. It is amazing to see how many different ways you can visualize the same data.   




### Load Libraries  
```{r}
#| warning: false
#| message: false


library(tidyverse)
library(tidytuesdayR)
library(here)
library(fishualize)
library(devtools)
library(sherlock)
library(ggExtra)  # for marginal plots
library(kableExtra) # table
```



### Read the Data  
```{r}
#| warning: false
#| message: false

tuesdata3 <- tidytuesdayR::tt_load('2025-11-18')
holmes <- tuesdata3$holmes

```


```{r}
#| warning: false
#| message: false

glimpse(holmes)
```

This data shows the Sherlock Holmes stories and novels line-by-line. It has the full collection of Holmes texts organized by book and line number. The dataset is made available through the {sherlock} R package by Emil Hvitfeldt.  




### Clean the Data  
```{r}
#| warning: false
#| message: false

# Load the dataset
holmes %>% 
  # Add line numbers to preserve narrative order
  mutate(line_num = row_number(), .by = "book") %>% 
  # Reorder columns
  select("book", "text", "line_num")

```

### Data Dictionary  
```{r}
#| warning: false
#| message: false
#| label: tbl-dictionary
#| tbl-cap: "Sherlock Holmes Data Dictionary"

# Data dictionary tibble
holmes_dictionary<-tibble(variable = c("book", "text", "line_num"),
                          class = c("character", "character", "integer"), 
                          description = c("Title of the Sherlock Holmes story or novel",
                                          "Line of text extracted from the book",
                                          "Narrative-preserving line index"))

holmes_dictionary %>%
  kbl(col.names = c("Variable", "Class", "Description"),  # make kable table and rename headers 
      caption = "Data Dictionary for holmes.csv") %>% # add caption
  kable_classic(full_width = FALSE, html_font = "Georgia") %>% # add a theme and font
  row_spec(1, bold = TRUE, color = "white", background = "#2d5867") %>% # highlight row 3
  row_spec(3, bold = TRUE, color = "white", background = "#2c003a") %>% # sherlock colors
  kable_styling(position = "center", full_width = FALSE) # make it less wide
```



### Tidy Tuesday Plot  
```{r}
#| warning: false
#| message: false
#| out-width: "80%"
#| fig-align: "center"
#| label: fig-TidyTuesday
#| fig-cap: "This is my Tidy Tuesday Week 13 plot."


holmes_clean <- holmes %>%
  drop_na(text) %>%  # drop blank lines 
  mutate(char_count = nchar(text))  # number of characters per line 

holmes_study <- holmes_clean %>% 
  filter(book == "A Study In Scarlet") # just one book

holmes_plot<-ggplot(holmes_study,
       aes(x = line_num, y = char_count)) +
  geom_point(alpha = 0.3, size = 0.7) +
  labs(title = "Line Length in 'A Study in Scarlet'",
       x = "Line Number in Book",
       y = "Characters Per Line") +
  theme_sherlock() + # sherlock theme 
  theme(plot.title = element_text(face = "bold", hjust = 0.6, size = 14),
        panel.background = element_rect(fill = "white"),
        plot.background  = element_rect(fill = "white"))

ggMarginal(holmes_plot, type = "density",  # marginal density plot from ggExtra
           margins = "both", alpha = 0.5, # margins, spacing, background
           fill = "#1e2e4d", bg = "white") # sherlock hex color
```
@fig-TidyTuesday shows a scatter plot of how many characters were in each line throughout the "A Study in Scarlet" book from the Sherlock Holmes series. The margin plots shows the density. Most lines seem to have 60+ characters per line.  





### New Thing Learned   

This Tidy Tuesday, I used **hex colors** to add to the Sherlock Holmes theme, made a data dictionary **kable table** for practice, and used **marginal plots** from ggExtra, which I have never tried before.  





##### Extra  
```{r}
# ggsave(here("Tidy_Tuesday","Week13_tidytuesday", "Output", "Week13_tt.jpg"))

# To do before running code:
# Empty your environment before you start working
# Restart R
# .rs.restartR()
# remove whole list in environment
# rm(list = ls())
```
















